<!DOCTYPE html>
<head>

<title>Node Application</title>

<script>

    async function loadTasks() {

        res = await fetch("get-tasks" , {

            method: "GET",
            headers: {

                "Accept" : "application/json",
                "Content-Type" : "application/json"

            }

        })

        jsonRes = await res.json()

        ulEl = document.getElementById("tasks")
        for(task of jsonRes.tasks)

            liEL = document.createElement("li")
            liEL.textContent = task 
            ulEl.appendChild(liEL)



        {
            tasks: ["task1, task2, task3"]
        }

    }

    async function handleSaveTask () {

        var ulEl = document.getElementById("tasks")
        var inputEl = document.getElementById("task")

        var liEl = document.createElement("li")
        liEl.textContent = inputEl.value
        ulEl.appendChild (liEl)

        

        payload = {

            task : inputEl.value

        }

           res = await fetch("save-task" , {

            method: "POST",
            body: JSON.stringify(payload),
            headers: {

                "Accept" : "application/json",
                "Content-Type" : "application/json"

            }

        } )

            jsonRres = await res.json()
            console.log(jsonRres)



    }

</script>

<link rel="stylesheet" href="style.css">


</head>

<body onload="loadTasks()">
    
    <div>

        <label>Add Task</label>
        <input id="task" type="text" placeholder="new task"/>
        <button onclick="handleSaveTask()">Save</button>

        <ul id="tasks"></ul>
    
    </div>

</body>